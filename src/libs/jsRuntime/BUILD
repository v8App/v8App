load("@v8App//:bazel/v8_app_rules.bzl", "v8App_library")

v8App_library(
    name = "jsRuntime",
    srcs = [
        "src/CodeCache.cc",
        "src/CppBridge/CallbackRegistry.cc",
        "src/CppBridge/V8Arguments.cc",
        "src/CppBridge/V8FunctionTemplate.cc",
        "src/CppBridge/V8CppObjBase.cc",
        "src/CppBridge/V8ObjectTemplateBuilder.cc",
        "src/CppBridge/V8TypeConverter.cc",
        "src/ForegroundTaskRunner.cc",
        "src/IJSSnapshotCreator.cc",
        "src/IJSSnapshotProvider.cc",
        "src/JSApp.cc",
        "src/JSContext.cc",
        "src/JSContextModules.cc",
        "src/JSModuleInfo.cc",
        "src/JSRuntime.cc",
        "src/JSUtilities.cc",
        "src/NestableQueue.cc",
        "src/V8AppPlatform.cc",
        "src/V8AppSnapshotCreator.cc",
        "src/V8AppSnapshotProvider.cc",
        "src/V8ContextProvider.cc",
        "src/V8Jobs.cc",
        "src/V8RuntimeProvider.cc",
        "src/V8SnapshotCreator.cc",
        "src/V8SnapshotProvider.cc",
        "src/WorkerTaskRunner.cc",
    ],
    hdrs = [
        "include/CodeCache.h",
        "include/CppBridge/CallbackRegistry.h",
        "include/CppBridge/CallbackHolderBase.h",
        "include/CppBridge/V8Arguments.h",
        "include/CppBridge/V8CppDataObject.h",
        "include/CppBridge/V8CppObjBase.h",
        "include/CppBridge/V8CppObject.h",
        "include/CppBridge/V8CppObjHandle.h",
        "include/CppBridge/V8CppObjInfo.h",
        "include/CppBridge/V8FunctionTemplate.h",
        "include/CppBridge/V8ObjectTemplateBuilder.h",
        "include/CppBridge/V8TypeConverter.h",
        "include/ForegroundTaskRunner.h",
        "include/IJSContextProvider.h",
        "include/IJSPlatformRuntimeProvider.h",
        "include/IJSRuntimeProvider.h",
        "include/IJSSnapshotCreator.h",
        "include/ISnapshotObject.h",
        "include/IJSSnapshotProvider.h",
        "include/ISnapshotHandleCloser.h",
        "include/JSApp.h",
        "include/JSContext.h",
        "include/JSContextModules.h",
        "include/JSModuleInfo.h",
        "include/JSRuntime.h",
        "include/JSUtilities.h",
        "include/NestableQueue.h",
        "include/V8AppPlatform.h",
        "include/V8AppSnapshotCreator.h",
        "include/V8AppSnapshotProvider.h",
        "include/V8ContextProvider.h",
        "include/V8Jobs.h",
        "include/V8RuntimeProvider.h",
        "include/V8SnapshotCreator.h",
        "include/V8SnapshotProvider.h",
        "include/V8Types.h",
        "include/WorkerTaskRunner.h",
    ],
    copts = [
        "-Isrc/libs/core/include",
        "-Isrc/libs/jsRuntime/include",
    ],
    defines = [
    ],
    visibility = ["//visibility:public"],
    deps = [
        "//src/libs/core",
        "//third_party/v8",
        "@com_mariusbancila_stduuid//:uuid"
    ],
)
