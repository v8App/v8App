load("@v8App//:bazel/v8_app_rules.bzl", "v8App_library")

v8App_library(
    name = "jsRuntime",
    srcs = [
        "src/CodeCache.cc",
        "src/CppBridge/CallbackRegistry.cc",
        "src/CppBridge/V8Arguments.cc",
        "src/CppBridge/V8FunctionTemplate.cc",
        "src/CppBridge/V8NativeObject.cc",
        "src/CppBridge/V8ObjectTemplateBuilder.cc",
        "src/CppBridge/V8TypeConverter.cc",
        "src/ForegroundTaskRunner.cc",
        "src/JSApp.cc",
        "src/JSContext.cc",
        "src/JSContextCreationHelper.cc",
        "src/JSContextCreator.cc",
        "src/JSContextModules.cc",
        "src/JSModuleInfo.cc",
        "src/JSRuntime.cc",
        "src/JSSnapshotCreator.cc",
        "src/V8SnapshotProvider.cc",
        "src/JSUtilities.cc",
        "src/NestableQueue.cc",
        "src/V8AppSnapshotProvider.cc",
        "src/V8Jobs.cc",
        "src/V8Platform.cc",
        "src/WorkerTaskRunner.cc",
    ],
    hdrs = [
        "include/CodeCache.h",
        "include/CppBridge/CallbackRegistry.h",
        "include/CppBridge/CallbackHolderBase.h",
        "include/CppBridge/V8Arguments.h",
        "include/CppBridge/V8CppObjInfo.h",
        "include/CppBridge/V8FunctionTemplate.h",
        "include/CppBridge/V8NativeObject.h",
        "include/CppBridge/V8NativeObjectHandle.h",
        "include/CppBridge/V8ObjectTemplateBuilder.h",
        "include/CppBridge/V8TypeConverter.h",
        "include/ForegroundTaskRunner.h",
        "include/ISnapshotHandleCloser.h",
        "include/JSApp.h",
        "include/JSContext.h",
        "include/JSContextCreationHelper.h",
        "include/JSContextCreator.h",
        "include/JSContextModules.h",
        "include/JSModuleInfo.h",
        "include/JSRuntime.h",
        "include/JSSnapshotCreator.h",
        "include/V8SnapshotProvider.h",
        "include/JSUtilities.h",
        "include/NestableQueue.h",
        "include/V8AppSnapshotProvider.h",
        "include/V8Jobs.h",
        "include/V8Platform.h",
        "include/V8Types.h",
        "include/WorkerTaskRunner.h",
    ],
    copts = [
        "-Isrc/libs/core/include",
        "-Isrc/libs/jsRuntime/include",
    ],
    defines = [
    ],
    visibility = ["//visibility:public"],
    deps = [
        "//src/libs/core",
        "//third_party/v8",
        "@com_mariusbancila_stduuid//:uuid"
    ],
)
